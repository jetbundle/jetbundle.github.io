<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Chapter 6: Jet Bundles, Exterior Differential Systems & Intrinsic Geometric PDEs</title>
  <meta name="description" content="The PDE is the Manifold">

  <!-- KaTeX Math Rendering - Always use client-side (works reliably on GitHub Pages) -->
  <!-- KaTeX Math Renderer - Reliable Client-Side Rendering -->
<!-- Load CSS immediately -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css" integrity="sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI+WdtXRGWt2kTvGFasHpSy3SV" crossorigin="anonymous">

<!-- Load KaTeX scripts synchronously for reliable rendering -->
<script>
(function() {
  // Load KaTeX core library
  var katexScript = document.createElement('script');
  katexScript.src = 'https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js';
  katexScript.integrity = 'sha384-XjKyOOlGwcjNTAIQHIpgOno0Hl1YQqzUOEleOLALmuqehneUG+vnGctmUb0ZY0l8';
  katexScript.crossOrigin = 'anonymous';
  katexScript.async = false;

  katexScript.onload = function() {
    // After KaTeX core loads, load auto-render
    var renderScript = document.createElement('script');
    renderScript.src = 'https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js';
    renderScript.integrity = 'sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05';
    renderScript.crossOrigin = 'anonymous';
    renderScript.async = false;

    renderScript.onload = function() {
      // Define render function
      function renderMath() {
        if (typeof renderMathInElement === 'undefined') {
          console.error('KaTeX auto-render not loaded');
          return;
        }

        try {
          renderMathInElement(document.body, {
            delimiters: [
              {left: '$$', right: '$$', display: true},
              {left: '$', right: '$', display: false},
              {left: '\\[', right: '\\]', display: true},
              {left: '\\(', right: '\\)', display: false}
            ],
            throwOnError: false,
            strict: false,
            trust: true,
            ignoredTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            ignoredClasses: ['no-math']
          });
          console.log('KaTeX math rendered successfully');
        } catch (error) {
          console.error('KaTeX rendering error:', error);
        }
      }

      // Render immediately if body exists, otherwise wait for DOM
      if (document.body) {
        renderMath();
      } else {
        document.addEventListener('DOMContentLoaded', renderMath);
      }

      // Also render after full page load (for dynamically added content)
      window.addEventListener('load', function() {
        setTimeout(renderMath, 100);
      });
    };

    renderScript.onerror = function() {
      console.error('Failed to load KaTeX auto-render script');
    };

    document.head.appendChild(renderScript);
  };

  katexScript.onerror = function() {
    console.error('Failed to load KaTeX core library');
  };

  document.head.appendChild(katexScript);
})();
</script>


  <!-- Prism.js Syntax Highlighting - Load with defer to not block math rendering -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />
  <script defer src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
  <script defer src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>

  <!-- Textbook CSS -->
  <link rel="stylesheet" href="/assets/css/textbook.css">
</head>
<body class="textbook-body theme-dark">
  <div class="theme-toggle-container">
  <button class="theme-toggle-btn" id="theme-toggle" title="Toggle Theme" aria-label="Toggle dark/light theme">
    <span class="theme-icon-sun">‚òÄ</span>
    <span class="theme-icon-moon">üåô</span>
  </button>
</div>


  <div class="textbook-container">
    <!-- Sidebar Navigation -->
    <nav class="textbook-sidebar">
      <div class="nav-header">
  <h3>Differential Equations</h3>
  <p style="margin: 0 1.5rem 1.5rem; color: var(--text-secondary); font-size: 0.9rem;">2025 Edition</p>
</div>

<nav class="nav-content">
  <ul>
    
    

    
      
        
          <li class="section-item">
            <a href="/diffequations/" >
              0. A Survey of Differential Equations and their Algebraic Geometry
            </a>
          </li>
        
      
    
      
        
        
        <li class="chapter-item">
          <a href="/diffequations/chapter-01/" >
            Chapter 1: Classical Explicit & Quasi-Explicit Arsenal
          </a>
          <ul>
      
    
      
        
          <li class="section-item">
            <a href="/diffequations/chapter-01/01-1-exact-methods/" >
              1.1 Exact Methods for Ordinary Differential Equations
            </a>
          </li>
        
      
    
      
        
          <li class="section-item">
            <a href="/diffequations/chapter-01/01-2-special-functions/" >
              1.2 Special Functions of Mathematical Physics
            </a>
          </li>
        
      
    
      
        
          <li class="section-item">
            <a href="/diffequations/chapter-01/01-3-integral-transforms/" >
              1.3 Integral Transforms
            </a>
          </li>
        
      
    
      
        
          <li class="section-item">
            <a href="/diffequations/chapter-01/01-4-linear-pde/" >
              1.4 Classical Linear Partial Differential Equations
            </a>
          </li>
        
      
    
      
        
          <li class="section-item">
            <a href="/diffequations/chapter-01/01-5-asymptotic-analysis/" >
              1.5 Asymptotic Analysis
            </a>
          </li>
        
      
    
      
        
          <li class="section-item">
            <a href="/diffequations/chapter-01/01-6-perturbation-theory/" >
              1.6 Classical Perturbation Theory
            </a>
          </li>
        
      
    
      
        
          <li class="section-item">
            <a href="/diffequations/chapter-01/01-7-renormalization/" >
              1.7 Classical Renormalization & Non-Perturbative Methods
            </a>
          </li>
        
      
    
      
        
          </ul>
        </li>
        
        
        <li class="chapter-item">
          <a href="/diffequations/chapter-02/" >
            Chapter 2: Functional Analysis, Distributions & Weak Solutions
          </a>
          <ul>
      
    
      
        
          <li class="section-item">
            <a href="/diffequations/chapter-02/02-1-distributions/" >
              2.1 Distributions & Test Functions
            </a>
          </li>
        
      
    
      
        
          <li class="section-item">
            <a href="/diffequations/chapter-02/02-2-sobolev-spaces/" >
              2.2 Sobolev Spaces & Weak Derivatives
            </a>
          </li>
        
      
    
      
        
          <li class="section-item">
            <a href="/diffequations/chapter-02/02-3-hilbert-spaces/" >
              2.3 Hilbert Space Theory & Spectral Theorem
            </a>
          </li>
        
      
    
      
        
          <li class="section-item">
            <a href="/diffequations/chapter-02/02-4-unbounded-operators/" >
              2.4 Unbounded Operators, Resolvents & Semigroups
            </a>
          </li>
        
      
    
      
        
          <li class="section-item">
            <a href="/diffequations/chapter-02/02-5-variational-methods/" >
              2.5 Variational Methods & Lax-Milgram
            </a>
          </li>
        
      
    
      
        
          <li class="section-item">
            <a href="/diffequations/chapter-02/02-6-galerkin-methods/" >
              2.6 Galerkin Methods & Finite Elements
            </a>
          </li>
        
      
    
      
        
          <li class="section-item">
            <a href="/diffequations/chapter-02/02-7-fredholm-theory/" >
              2.7 Fredholm Theory & Index
            </a>
          </li>
        
      
    
      
        
          </ul>
        </li>
        
        
        <li class="chapter-item">
          <a href="/diffequations/chapter-03/" >
            Chapter 3: Tensor Fields, Conservation Laws & Geometric Formulation
          </a>
          <ul>
      
    
      
        
          <li class="section-item">
            <a href="/diffequations/chapter-03/03-1-manifolds-tensors/" >
              3.1 Manifolds, Tensors & Covariant Derivatives
            </a>
          </li>
        
      
    
      
        
          <li class="section-item">
            <a href="/diffequations/chapter-03/03-2-conservation-laws/" >
              3.2 Systems of Conservation Laws & Hyperbolicity
            </a>
          </li>
        
      
    
      
        
          <li class="section-item">
            <a href="/diffequations/chapter-03/03-3-entropy-solutions/" >
              3.3 Entropy Solutions & Shock Theory
            </a>
          </li>
        
      
    
      
        
          <li class="section-item">
            <a href="/diffequations/chapter-03/03-4-exterior-calculus/" >
              3.4 Exterior Calculus & Hodge Decomposition
            </a>
          </li>
        
      
    
      
        
          <li class="section-item">
            <a href="/diffequations/chapter-03/03-5-continuum-mechanics/" >
              3.5 Continuum Mechanics & Elasticity
            </a>
          </li>
        
      
    
      
        
          <li class="section-item">
            <a href="/diffequations/chapter-03/03-6-geometric-optics/" >
              3.6 Geometric Optics, Rays & Caustics
            </a>
          </li>
        
      
    
      
        
          </ul>
        </li>
        
        
        <li class="chapter-item">
          <a href="/diffequations/chapter-04/" >
            Chapter 4: Symmetry, Lie Theory & Classical Integrability
          </a>
          <ul>
      
    
      
        
          <li class="section-item">
            <a href="/diffequations/chapter-04/04-1-lie-symmetries/" >
              4.1 Lie Symmetries & Prolongation
            </a>
          </li>
        
      
    
      
        
          <li class="section-item">
            <a href="/diffequations/chapter-04/04-2-noether-theorem/" >
              4.2 Noether's Theorem & Invariant Reduction
            </a>
          </li>
        
      
    
      
        
          <li class="section-item">
            <a href="/diffequations/chapter-04/04-3-integrable-systems/" >
              4.3 Completely Integrable Systems
            </a>
          </li>
        
      
    
      
        
          <li class="section-item">
            <a href="/diffequations/chapter-04/04-4-lax-pairs/" >
              4.4 Lax Pairs & Zero-Curvature Representations
            </a>
          </li>
        
      
    
      
        
          <li class="section-item">
            <a href="/diffequations/chapter-04/04-5-riemann-hilbert/" >
              4.5 Riemann-Hilbert & Inverse Scattering
            </a>
          </li>
        
      
    
      
        
          <li class="section-item">
            <a href="/diffequations/chapter-04/04-6-recursion-operators/" >
              4.6 Recursion Operators & Hirota Bilinearization
            </a>
          </li>
        
      
    
      
        
          <li class="section-item">
            <a href="/diffequations/chapter-04/04-7-susy-qm/" >
              4.7 Supersymmetric Quantum Mechanics
            </a>
          </li>
        
      
    
      
        
          <li class="section-item">
            <a href="/diffequations/chapter-04/04-8-nonlocal-symmetries/" >
              4.8 Nonlocal Symmetries & Potential Systems
            </a>
          </li>
        
      
    
      
        
          </ul>
        </li>
        
        
        <li class="chapter-item">
          <a href="/diffequations/chapter-05/" >
            Chapter 5: Stochastic, Rough, Fractional & Nonlocal Dynamics
          </a>
          <ul>
      
    
      
        
          <li class="section-item">
            <a href="/diffequations/chapter-05/05-1-stochastic-calculus/" >
              5.1 Stochastic Calculus Foundations
            </a>
          </li>
        
      
    
      
        
          <li class="section-item">
            <a href="/diffequations/chapter-05/05-2-sdes/" >
              5.2 SDEs & Diffusion Processes
            </a>
          </li>
        
      
    
      
        
          <li class="section-item">
            <a href="/diffequations/chapter-05/05-3-geometric-stochastic/" >
              5.3 Geometric Stochastic Analysis
            </a>
          </li>
        
      
    
      
        
          <li class="section-item">
            <a href="/diffequations/chapter-05/05-4-rough-paths/" >
              5.4 Rough Paths & Controlled Rough Paths
            </a>
          </li>
        
      
    
      
        
          <li class="section-item">
            <a href="/diffequations/chapter-05/05-5-fractional-calculus/" >
              5.5 Fractional Calculus & Nonlocal Operators
            </a>
          </li>
        
      
    
      
        
          <li class="section-item">
            <a href="/diffequations/chapter-05/05-6-spdes/" >
              5.6 SPDEs & Regularity Structures
            </a>
          </li>
        
      
    
      
        
          <li class="section-item">
            <a href="/diffequations/chapter-05/05-7-kinetic-theory/" >
              5.7 Kinetic Theory & Mean-Field Games
            </a>
          </li>
        
      
    
      
        
          <li class="section-item">
            <a href="/diffequations/chapter-05/05-8-fractal-geometry/" >
              5.8 Fractal Geometry & Dirichlet Forms
            </a>
          </li>
        
      
    
      
        
          <li class="section-item">
            <a href="/diffequations/chapter-05/05-9-susy-stochastics/" >
              5.9 Supersymmetric Theory of Stochastics
            </a>
          </li>
        
      
    
      
        
          </ul>
        </li>
        
        
        <li class="chapter-item">
          <a href="/diffequations/chapter-06/" class="active">
            Chapter 6: Jet Bundles, Exterior Differential Systems & Intrinsic Geometric PDEs
          </a>
          <ul>
      
    
      
        
          <li class="section-item">
            <a href="/diffequations/chapter-06/06-1-jet-bundles/" >
              6.1 Jet Bundles & Prolongation
            </a>
          </li>
        
      
    
      
        
          <li class="section-item">
            <a href="/diffequations/chapter-06/06-2-formal-integrability/" >
              6.2 Formal Integrability & Spencer Cohomology
            </a>
          </li>
        
      
    
      
        
          <li class="section-item">
            <a href="/diffequations/chapter-06/06-3-exterior-systems/" >
              6.3 Exterior Differential Systems & Cartan-K√§hler
            </a>
          </li>
        
      
    
      
        
          <li class="section-item">
            <a href="/diffequations/chapter-06/06-4-metric-space/" >
              6.4 The Space of Riemannian Metrics
            </a>
          </li>
        
      
    
      
        
          <li class="section-item">
            <a href="/diffequations/chapter-06/06-5-geometric-evolution/" >
              6.5 Geometric Evolution Equations
            </a>
          </li>
        
      
    
      
        
          <li class="section-item">
            <a href="/diffequations/chapter-06/06-6-gauge-theories/" >
              6.6 Gauge Theories & Instanton Moduli
            </a>
          </li>
        
      
    
      
        
          <li class="section-item">
            <a href="/diffequations/chapter-06/06-7-nonlinear-systems/" >
              6.7 Fully Nonlinear & Overdetermined Systems
            </a>
          </li>
        
      
    
      
        
          </ul>
        </li>
        
        
        <li class="chapter-item">
          <a href="/diffequations/chapter-07/" >
            Chapter 7: Microlocal Analysis, D-Modules & Categorical Resolution
          </a>
          <ul>
      
    
      
        
          <li class="section-item">
            <a href="/diffequations/chapter-07/07-1-d-modules/" >
              7.1 D-Modules & Holonomic Systems
            </a>
          </li>
        
      
    
      
        
          <li class="section-item">
            <a href="/diffequations/chapter-07/07-2-microlocal-analysis/" >
              7.2 Microlocal Analysis & Wave Front Sets
            </a>
          </li>
        
      
    
      
        
          <li class="section-item">
            <a href="/diffequations/chapter-07/07-3-riemann-hilbert/" >
              7.3 Riemann-Hilbert Correspondence
            </a>
          </li>
        
      
    
      
        
          <li class="section-item">
            <a href="/diffequations/chapter-07/07-4-fourier-integral/" >
              7.4 Fourier Integral Operators
            </a>
          </li>
        
      
    
      
        
          <li class="section-item">
            <a href="/diffequations/chapter-07/07-5-resurgence/" >
              7.5 Resurgence, Borel Summation & Alien Calculus
            </a>
          </li>
        
      
    
      
        
          <li class="section-item">
            <a href="/diffequations/chapter-07/07-6-index-theorems/" >
              7.6 Index Theorems & K-Theory
            </a>
          </li>
        
      
    
      
        
          <li class="section-item">
            <a href="/diffequations/chapter-07/07-7-noncommutative/" >
              7.7 Noncommutative Geometry
            </a>
          </li>
        
      
    
      
        
          <li class="section-item">
            <a href="/diffequations/chapter-07/07-8-higher-categories/" >
              7.8 Higher Categories, Derived Stacks & TQFT
            </a>
          </li>
        
      
    
      
        
      
    

    
      </ul>
    </li>
    

    
    
      
        
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
        
          
          <li class="chapter-item">
            <a href="/diffequations/epilogue/" >
              Epilogue: The Eternal Structure
            </a>
          </li>
        
      
    
  </ul>
</nav>

    </nav>

    <!-- Main Content -->
    <main class="textbook-main">
      <header class="textbook-header">
        <h1>Chapter 6: Jet Bundles, Exterior Differential Systems & Intrinsic Geometric PDEs</h1>
        <p class="description">The PDE is the Manifold</p>
      </header>

      <article class="textbook-content">
        <h1 id="chapter-6-jet-bundles-exterior-differential-systems--intrinsic-geometric-pdes">Chapter 6: Jet Bundles, Exterior Differential Systems &amp; Intrinsic Geometric PDEs</h1>

<p>The PDE <em>is</em> the Manifold.</p>

<h2 id="introduction">Introduction</h2>

<p>Chapter 5 showed that noise dissolves background geometry, and we are still solving equations <em>on</em> a space. This chapter reformulates PDEs as submanifolds of jet space, viewing the equation itself as the fundamental geometric object. We erase the distinction between dependent and independent variables, study the geometry of solution spaces (moduli spaces), and develop geometric evolution equations like Ricci flow.</p>

<p>Now the goal is to reformulate PDEs as submanifolds of Jet Space and study the geometry of the solution space itself.</p>

<h2 id="chapter-overview">Chapter Overview</h2>

<p>This chapter addresses the intrinsic geometric formulation of PDEs. We will explore:</p>

<ol>
  <li>
    <p><strong>Jet Bundles &amp; Prolongation</strong>: Erasing the distinction between dependent and independent variables, constructing jet bundles and contact structures, and defining PDEs as closed submanifolds.</p>
  </li>
  <li>
    <p><strong>Formal Integrability &amp; Spencer Cohomology</strong>: Defining the symbol of a PDE as a geometric object, introducing Spencer cohomology to measure formal obstructions, and defining involution.</p>
  </li>
  <li>
    <p><strong>Exterior Differential Systems &amp; Cartan-K√§hler</strong>: Treating PDEs as differential ideals in exterior algebra, with Cartan-K√§hler theorem guaranteeing analytic solutions for involutive systems.</p>
  </li>
  <li>
    <p><strong>The Space of Riemannian Metrics</strong>: Constructing the moduli space of all possible geometries, with Ebin slice theorem handling diffeomorphism gauge symmetry.</p>
  </li>
  <li>
    <p><strong>Geometric Evolution Equations</strong>: Defining dynamics on the space of metrics, with Ricci flow as gradient flow of Einstein-Hilbert action, and singularity formation as topological surgery.</p>
  </li>
  <li>
    <p><strong>Gauge Theories &amp; Instanton Moduli</strong>: Studying geometry of fiber bundles, defining instantons (self-dual connections) and their moduli spaces, identifying them as supersymmetric vacua.</p>
  </li>
  <li>
    <p><strong>Fully Nonlinear &amp; Overdetermined Systems</strong>: Returning to scalar equations with maximal geometric nonlinearity (Monge-Amp√®re), with continuity method and a priori estimates solving the convexity barrier.</p>
  </li>
</ol>

<h2 id="chapter-sections">Chapter Sections</h2>

<ul>
  <li><a href="/diffequations/chapter-06/06-1-jet-bundles/">6.1 Jet Bundles &amp; Prolongation</a></li>
  <li><a href="/diffequations/chapter-06/06-2-formal-integrability/">6.2 Formal Integrability &amp; Spencer Cohomology</a></li>
  <li><a href="/diffequations/chapter-06/06-3-exterior-systems/">6.3 Exterior Differential Systems &amp; Cartan-K√§hler</a></li>
  <li><a href="/diffequations/chapter-06/06-4-metric-space/">6.4 The Space of Riemannian Metrics</a></li>
  <li><a href="/diffequations/chapter-06/06-5-geometric-evolution/">6.5 Geometric Evolution Equations</a></li>
  <li><a href="/diffequations/chapter-06/06-6-gauge-theories/">6.6 Gauge Theories &amp; Instanton Moduli</a></li>
  <li><a href="/diffequations/chapter-06/06-7-nonlinear-systems/">6.7 Fully Nonlinear &amp; Overdetermined Systems</a></li>
</ul>

<h2 id="navigation">Navigation</h2>

<nav class="page-navigation">
  <div class="nav-previous">
    
      <a href="/diffequations/chapter-05/05-9-susy-stochastics/" class="nav-link">
        <span class="nav-arrow">‚Üê</span>
        <span class="nav-text">
          <span class="nav-label">Previous</span>
          <span class="nav-title">Section 5.9: Supersymmetric Theory of Stochastics</span>
        </span>
      </a>
    
  </div>
  <div class="nav-next">
    
      <a href="/diffequations/chapter-06/06-1-jet-bundles/" class="nav-link">
        <span class="nav-text">
          <span class="nav-label">Next</span>
          <span class="nav-title">Section 6.1: Jet Bundles &amp; Prolongation</span>
        </span>
        <span class="nav-arrow">‚Üí</span>
      </a>
    
  </div>
</nav>

<hr />

<h2 id="chapter-themes">Chapter Themes</h2>

<p>This chapter geometrizes PDEs completely. We erase the artificial distinction between dependent and independent variables by working in jet space, where a PDE is a submanifold. The symbol of a PDE becomes a geometric object, and Spencer cohomology measures formal obstructions to solving the equation. Cartan-K√§hler theorem converts analysis into the algebraic problem of constructing integral elements.</p>

<p>We zoom out to study the space of all possible geometries‚Äîthe moduli space of metrics. Geometric evolution equations like Ricci flow define dynamics on this infinite-dimensional space. Singularity formation becomes topological surgery, and instantons emerge as supersymmetric vacua connecting to Chapter 5.</p>

<p><strong>We have geometrized everything, but the moduli spaces (solution spaces) are often singular or non-compact. We cannot do simple calculus on them</strong>  We need a tool that is robust against these singularities. This motivates Chapter 7, where we resolve singularities using the algebraic tools of the cotangent bundle and category theory.</p>

<h2 id="prerequisites">Prerequisites</h2>

<p>This chapter assumes familiarity with:
- Differential geometry (fiber bundles, connections)
- Algebraic geometry (schemes, moduli spaces)
- Chapter 3 material (manifolds, tensors)
- Chapter 4 material (symmetries, for gauge theories)
- Chapter 5 material (supersymmetry, for instantons)</p>

<h2 id="notation">Notation</h2>

<ul>
  <li>$J^k$: $k$-th jet bundle</li>
  <li>$\theta^\alpha$: contact forms</li>
  <li>$g_k$: symbol module</li>
  <li>$H^{p,q}$: Spencer cohomology</li>
  <li>$\text{Met}(M)$: space of Riemannian metrics</li>
  <li>$F_A$: curvature of connection $A$</li>
</ul>

<hr />

<p><strong>Previous Chapter:</strong> <a href="/diffequations/chapter-05/">Chapter 5: Stochastic, Rough, Fractional &amp; Nonlocal Dynamics</a>
<strong>Next Chapter:</strong> <a href="/diffequations/chapter-07/">Chapter 7: Microlocal Analysis, D-Modules &amp; Categorical Resolution</a></p>

      </article>
    </main>
  </div>

  <!-- Heavy Scripts: Load lazily after content and math are rendered -->
  <!-- Pyodide & Plotly - Deferred to not block initial rendering -->
  <script>
    // Lazy load heavy scripts only when needed or after page is fully interactive
    window.addEventListener('load', function() {
      // Load Pyodide and Plotly after page is fully loaded
      // They will be loaded on-demand when code execution buttons are clicked

      // Load Plotly (smaller, can load earlier)
      var plotlyScript = document.createElement('script');
      plotlyScript.src = 'https://cdn.plot.ly/plotly-2.27.0.min.js';
      plotlyScript.charset = 'utf-8';
      plotlyScript.async = true;
      document.body.appendChild(plotlyScript);

      // Pyodide is loaded on-demand by textbook-engine.js when first code block is executed
      // This saves ~10MB on initial page load
    });
  </script>

  <!-- Textbook JavaScript - Load with defer to not block math rendering -->
  <script defer src="/assets/js/theme-manager.js"></script>
  <script defer src="/assets/js/textbook-engine.js"></script>
  <script defer src="/assets/js/widget-engine.js"></script>
  <script defer src="/assets/js/code-toggle.js"></script>
</body>
</html>
