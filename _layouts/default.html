<!DOCTYPE html>
<html>
  {% include head.html %}
  <body class="animated fadeIn">
    {% include header.html %}
    <div class="container">
      <div id="background-div">
        <svg id="background-svg">
          <lineargradient id="Gradient1" x1="0" x2="0" y1="0" y2="1">
            <stop stop-opacity="0" class="bgColor1" offset="0%" />
            <stop stop-opacity="1" class="bgColor2" offset="100%" />
          </lineargradient>
        </svg>
      </div>
      {{ content }}
    </div>
    {% include footer.html %}
    
    <!-- JetBundle Gauge Theme CSS - Loads after theme CSS -->
    <link rel="stylesheet" href="/assets/css/gauge-theme.css">
    
    <!-- JetBundle Gauge Theme JavaScript - Aggressive style enforcement -->
    <script>
      (function() {
        'use strict';
        
        // Inject CSS into head if not already there
        function injectCSS() {
          if (!document.getElementById('gauge-theme-css-head')) {
            const link = document.createElement('link');
            link.id = 'gauge-theme-css-head';
            link.rel = 'stylesheet';
            link.href = '/assets/css/gauge-theme.css';
            link.media = 'all';
            document.head.appendChild(link);
          }
        }
        injectCSS();
        
        // Aggressive style application function
        function applyGaugeTheme() {
          try {
            // Override body with maximum specificity
            const body = document.body;
            if (body) {
              body.style.cssText += 'background: linear-gradient(135deg, #0b0e17 0%, #0a0d14 100%) !important; background-color: #0b0e17 !important; color: #f1f5f9 !important;';
            }
            
            // Override html element
            const html = document.documentElement;
            if (html) {
              html.style.cssText += 'background: linear-gradient(135deg, #0b0e17 0%, #0a0d14 100%) !important; background-color: #0b0e17 !important;';
            }
            
            // Override background div
            const bgDiv = document.getElementById('background-div');
            if (bgDiv) {
              bgDiv.style.cssText += 'background: linear-gradient(135deg, #0b0e17 0%, #0a0d14 100%) !important; background-color: #0b0e17 !important;';
            }
            
            // Override SVG gradients - use both class and direct attribute
            const svg = document.getElementById('background-svg');
            if (svg) {
              const stops = svg.querySelectorAll('stop');
              stops.forEach(stop => {
                if (stop.classList.contains('bgColor1') || stop.getAttribute('class')?.includes('bgColor1')) {
                  stop.setAttribute('stop-color', '#0b0e17');
                  stop.style.setProperty('stop-color', '#0b0e17', 'important');
                } else if (stop.classList.contains('bgColor2') || stop.getAttribute('class')?.includes('bgColor2')) {
                  stop.setAttribute('stop-color', '#0a0d14');
                  stop.style.setProperty('stop-color', '#0a0d14', 'important');
                }
              });
            }
            
            // Override all headings with direct style application
            document.querySelectorAll('h1, h2, h3, h4, h5, h6, .post-title').forEach(h => {
              h.style.setProperty('color', '#ff6b35', 'important');
              if (h.tagName === 'H1' || h.classList.contains('post-title')) {
                h.style.setProperty('background', 'linear-gradient(135deg, #ff6b35 0%, #ff4500 100%)', 'important');
                h.style.setProperty('-webkit-background-clip', 'text', 'important');
                h.style.setProperty('-webkit-text-fill-color', 'transparent', 'important');
                h.style.setProperty('background-clip', 'text', 'important');
              }
            });
            
            // Override all links
            document.querySelectorAll('a').forEach(a => {
              if (!a.closest('h1')) { // Don't override h1 links (they have special gradient)
                a.style.setProperty('color', '#0ea5e9', 'important');
              }
            });
            
            // Override navigation with multiple selectors
            document.querySelectorAll('.navbar-icon, nav a, .navbar a, header a, .toolbar a').forEach(a => {
              a.style.setProperty('color', '#94a3b8', 'important');
            });
            
            // Override containers
            document.querySelectorAll('.container, .wrapper, main, .content').forEach(el => {
              el.style.setProperty('background', 'transparent', 'important');
              el.style.setProperty('background-color', 'transparent', 'important');
              el.style.setProperty('color', '#f1f5f9', 'important');
            });
          } catch (e) {
            console.error('Gauge theme application error:', e);
          }
        }
        
        // Apply immediately
        if (document.readyState === 'loading') {
          document.addEventListener('DOMContentLoaded', applyGaugeTheme);
        } else {
          applyGaugeTheme();
        }
        
        // Apply multiple times with increasing delays
        [50, 100, 200, 500, 1000, 2000].forEach(delay => {
          setTimeout(applyGaugeTheme, delay);
        });
        
        // Use MutationObserver to catch dynamic changes
        const observer = new MutationObserver(function(mutations) {
          applyGaugeTheme();
        });
        
        observer.observe(document.body, {
          childList: true,
          subtree: true,
          attributes: true,
          attributeFilter: ['style', 'class']
        });
        
        // Enhanced cursor trail
        const trail = [];
        const trailLength = 20;
        const container = document.createElement('div');
        container.id = 'mouse-trail-container';
        container.style.cssText = 'position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:99999;';
        document.body.appendChild(container);
        
        for (let i = 0; i < trailLength; i++) {
          const p = document.createElement('div');
          p.style.cssText = `position:absolute;width:${Math.max(2, 8-i*0.3)}px;height:${Math.max(2, 8-i*0.3)}px;background:radial-gradient(circle,rgba(255,107,53,${Math.max(0, 1-i*0.05)})0%,rgba(14,165,233,${Math.max(0, 0.8-i*0.04)})50%,transparent 100%);border-radius:50%;pointer-events:none;transform:translate(-50%,-50%);opacity:0;transition:opacity 0.1s;box-shadow:0 0 ${10+i*2}px rgba(255,107,53,0.5),0 0 ${15+i*3}px rgba(14,165,233,0.3);mix-blend-mode:screen;`;
          container.appendChild(p);
          trail.push({el:p,x:0,y:0,op:0});
        }
        
        let mx=0,my=0;
        document.addEventListener('mousemove',e=>{mx=e.clientX;my=e.clientY;});
        
        function anim() {
          trail.forEach((p,i)=>{
            if(i===0){p.x=mx;p.y=my;p.op=1;}
            else{
              const prev=trail[i-1];
              const dx=prev.x-p.x,dy=prev.y-p.y;
              const d=Math.sqrt(dx*dx+dy*dy);
              if(d>2){p.x+=dx*0.3;p.y+=dy*0.3;}else{p.x=prev.x;p.y=prev.y;}
              p.op=Math.max(0,p.op-0.05);
            }
            p.el.style.left=p.x+'px';
            p.el.style.top=p.y+'px';
            p.el.style.opacity=p.op;
          });
          requestAnimationFrame(anim);
        }
        anim();
      })();
    </script>
  </body>
</html>
